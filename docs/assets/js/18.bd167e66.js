(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{339:function($,s,a){"use strict";a.r(s);var n=a(32),t=Object(n.a)({},(function(){var $=this,s=$.$createElement,a=$._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":$.$parent.slotKey}},[a("h1",{attrs:{id:"vimでbad-apple"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vimでbad-apple"}},[$._v("#")]),$._v(" VimでBad Apple!!")]),$._v(" "),a("p",[$._v("こんにちわ。\n"),a("a",{attrs:{href:"https://gorillavim.connpass.com/",target:"_blank",rel:"noopener noreferrer"}},[$._v("ゴリラ.vim"),a("OutboundLink")],1),$._v("を運営している"),a("a",{attrs:{href:"https://twitter.com/gorilla0513",target:"_blank",rel:"noopener noreferrer"}},[$._v("ゴリラ"),a("OutboundLink")],1),$._v("です。")]),$._v(" "),a("p",[$._v("最近Vimのプラグインを作るのにハマっています。先日も"),a("a",{attrs:{href:"https://qiita.com/gorilla0513/items/1c756fd3aba8e68b9575",target:"_blank",rel:"noopener noreferrer"}},[$._v("docker.vim"),a("OutboundLink")],1),$._v("というVimからdockerコンテナを操作するプラグインを作りました。\n良かった試してみてください。")]),$._v(" "),a("p",[$._v("さて、本題ですがみなさんは"),a("code",[$._v("Bad Apple!!")]),$._v("をご存知でしょうか？\n多分ニコニコユーザならほぼ知っているのではないかと思います。\nそうです。かの有名な動画です。")]),$._v(" "),a("p",[$._v("その動画のAscii版があり、それならVimで再生できるのでは？と思い帰りの電車の中で作ってみました。")]),$._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/skanehira/badapple.vim"}},[a("img",{attrs:{src:"https://github-link-card.s3.ap-northeast-1.amazonaws.com/skanehira/badapple.vim.png",width:"460px"}})])]),$._v(" "),a("h1",{attrs:{id:"どんな感じ？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#どんな感じ？"}},[$._v("#")]),$._v(" どんな感じ？")]),$._v(" "),a("p",[$._v("こんな感じです。\nすこしちらつきますが、まぁ見れなくはないかなと言った感じです。")]),$._v(" "),a("p",[a("img",{attrs:{src:"https://github.com/skanehira/badapple.vim/raw/master/screenshots/screenshot.gif?raw=true",alt:""}})]),$._v(" "),a("h1",{attrs:{id:"仕組みは？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仕組みは？"}},[$._v("#")]),$._v(" 仕組みは？")]),$._v(" "),a("p",[$._v("とっても簡単です。簡潔に言うとテキストファイルを読み込み、フレーム分のテキストを配列に格納して、あとはfor分で回して画面に描写します。")]),$._v(" "),a("p",[$._v("もう少し細かく解説します。")]),$._v(" "),a("h2",{attrs:{id:"asciiテキストファイルの読み込み"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asciiテキストファイルの読み込み"}},[$._v("#")]),$._v(" Asciiテキストファイルの読み込み")]),$._v(" "),a("p",[$._v("Bad Apple!のAsciiテキストファイルは"),a("a",{attrs:{href:"https://github.com/Chion82/ASCII_bad_apple",target:"_blank",rel:"noopener noreferrer"}},[$._v("こちら"),a("OutboundLink")],1),$._v("にあるので、それを借用しました。\n")]),a("details",[a("summary",[$._v("テキストファイル")]),a("p"),$._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[$._v("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$SPLIT$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$SPLIT$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$\n")])]),$._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[$._v("1")]),a("br"),a("span",{staticClass:"line-number"},[$._v("2")]),a("br"),a("span",{staticClass:"line-number"},[$._v("3")]),a("br"),a("span",{staticClass:"line-number"},[$._v("4")]),a("br"),a("span",{staticClass:"line-number"},[$._v("5")]),a("br"),a("span",{staticClass:"line-number"},[$._v("6")]),a("br"),a("span",{staticClass:"line-number"},[$._v("7")]),a("br"),a("span",{staticClass:"line-number"},[$._v("8")]),a("br"),a("span",{staticClass:"line-number"},[$._v("9")]),a("br"),a("span",{staticClass:"line-number"},[$._v("10")]),a("br"),a("span",{staticClass:"line-number"},[$._v("11")]),a("br"),a("span",{staticClass:"line-number"},[$._v("12")]),a("br"),a("span",{staticClass:"line-number"},[$._v("13")]),a("br"),a("span",{staticClass:"line-number"},[$._v("14")]),a("br"),a("span",{staticClass:"line-number"},[$._v("15")]),a("br"),a("span",{staticClass:"line-number"},[$._v("16")]),a("br"),a("span",{staticClass:"line-number"},[$._v("17")]),a("br"),a("span",{staticClass:"line-number"},[$._v("18")]),a("br"),a("span",{staticClass:"line-number"},[$._v("19")]),a("br"),a("span",{staticClass:"line-number"},[$._v("20")]),a("br"),a("span",{staticClass:"line-number"},[$._v("21")]),a("br"),a("span",{staticClass:"line-number"},[$._v("22")]),a("br"),a("span",{staticClass:"line-number"},[$._v("23")]),a("br"),a("span",{staticClass:"line-number"},[$._v("24")]),a("br"),a("span",{staticClass:"line-number"},[$._v("25")]),a("br"),a("span",{staticClass:"line-number"},[$._v("26")]),a("br"),a("span",{staticClass:"line-number"},[$._v("27")]),a("br"),a("span",{staticClass:"line-number"},[$._v("28")]),a("br"),a("span",{staticClass:"line-number"},[$._v("29")]),a("br"),a("span",{staticClass:"line-number"},[$._v("30")]),a("br"),a("span",{staticClass:"line-number"},[$._v("31")]),a("br"),a("span",{staticClass:"line-number"},[$._v("32")]),a("br"),a("span",{staticClass:"line-number"},[$._v("33")]),a("br"),a("span",{staticClass:"line-number"},[$._v("34")]),a("br"),a("span",{staticClass:"line-number"},[$._v("35")]),a("br"),a("span",{staticClass:"line-number"},[$._v("36")]),a("br"),a("span",{staticClass:"line-number"},[$._v("37")]),a("br"),a("span",{staticClass:"line-number"},[$._v("38")]),a("br"),a("span",{staticClass:"line-number"},[$._v("39")]),a("br"),a("span",{staticClass:"line-number"},[$._v("40")]),a("br"),a("span",{staticClass:"line-number"},[$._v("41")]),a("br"),a("span",{staticClass:"line-number"},[$._v("42")]),a("br"),a("span",{staticClass:"line-number"},[$._v("43")]),a("br"),a("span",{staticClass:"line-number"},[$._v("44")]),a("br"),a("span",{staticClass:"line-number"},[$._v("45")]),a("br"),a("span",{staticClass:"line-number"},[$._v("46")]),a("br"),a("span",{staticClass:"line-number"},[$._v("47")]),a("br"),a("span",{staticClass:"line-number"},[$._v("48")]),a("br"),a("span",{staticClass:"line-number"},[$._v("49")]),a("br"),a("span",{staticClass:"line-number"},[$._v("50")]),a("br"),a("span",{staticClass:"line-number"},[$._v("51")]),a("br"),a("span",{staticClass:"line-number"},[$._v("52")]),a("br"),a("span",{staticClass:"line-number"},[$._v("53")]),a("br"),a("span",{staticClass:"line-number"},[$._v("54")]),a("br"),a("span",{staticClass:"line-number"},[$._v("55")]),a("br"),a("span",{staticClass:"line-number"},[$._v("56")]),a("br"),a("span",{staticClass:"line-number"},[$._v("57")]),a("br"),a("span",{staticClass:"line-number"},[$._v("58")]),a("br"),a("span",{staticClass:"line-number"},[$._v("59")]),a("br")])])]),$._v(" "),a("p",[$._v("見て分かる通り、"),a("code",[$._v("SPLIT")]),$._v("で区切っています。なので、"),a("code",[$._v("SPLIT")]),$._v("までを1フレームとしてます。\n処理は次になります。")]),$._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" read file to create frames')]),$._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("function")]),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("!")]),$._v(" s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(":")]),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("read_file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v(" abort\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("let")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("file")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("=")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("globpath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),$._v("&"),a("span",{pre:!0,attrs:{class:"token builtin"}},[$._v("rtp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(",")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[$._v("'resources/badapple.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" 全frameを格納')]),$._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("let")]),$._v(" frames "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("=")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("]")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" 1frame分のテキストを格納')]),$._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("let")]),$._v(" frame "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("=")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("]")]),$._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("for")]),$._v(" line "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("in")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("readfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" 現在行に`SPLIT`が含まれていなければframeに追加')]),$._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("if")]),$._v(" line "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("!~#")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[$._v('"SPLIT"')]),$._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("call")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),$._v("frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(",")]),$._v(" line"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("else")]),$._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" frameをframes追加')]),$._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("call")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),$._v("frames"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(",")]),$._v(" frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("let")]),$._v(" frame "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("=")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("]")]),$._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("endif")]),$._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("endfor")]),$._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("return")]),$._v(" frames\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("endfunction")]),$._v("\n")])]),$._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[$._v("1")]),a("br"),a("span",{staticClass:"line-number"},[$._v("2")]),a("br"),a("span",{staticClass:"line-number"},[$._v("3")]),a("br"),a("span",{staticClass:"line-number"},[$._v("4")]),a("br"),a("span",{staticClass:"line-number"},[$._v("5")]),a("br"),a("span",{staticClass:"line-number"},[$._v("6")]),a("br"),a("span",{staticClass:"line-number"},[$._v("7")]),a("br"),a("span",{staticClass:"line-number"},[$._v("8")]),a("br"),a("span",{staticClass:"line-number"},[$._v("9")]),a("br"),a("span",{staticClass:"line-number"},[$._v("10")]),a("br"),a("span",{staticClass:"line-number"},[$._v("11")]),a("br"),a("span",{staticClass:"line-number"},[$._v("12")]),a("br"),a("span",{staticClass:"line-number"},[$._v("13")]),a("br"),a("span",{staticClass:"line-number"},[$._v("14")]),a("br"),a("span",{staticClass:"line-number"},[$._v("15")]),a("br"),a("span",{staticClass:"line-number"},[$._v("16")]),a("br"),a("span",{staticClass:"line-number"},[$._v("17")]),a("br"),a("span",{staticClass:"line-number"},[$._v("18")]),a("br"),a("span",{staticClass:"line-number"},[$._v("19")]),a("br"),a("span",{staticClass:"line-number"},[$._v("20")]),a("br"),a("span",{staticClass:"line-number"},[$._v("21")]),a("br")])]),a("p",[$._v("なぜframeを配列にしているかというと、vimではバッファにテキストを書き込む"),a("code",[$._v("setline()")]),$._v("とpopup windowのバッファに書き込む"),a("code",[$._v("popup_settext()")]),$._v("という関数がありますが、\n引数に配列を渡すと配列の1要素が1行として画面に出力します。そうすることで改行文字をわざわざ追加しなくて済むのでコードがスッキリします。")]),$._v(" "),a("h2",{attrs:{id:"画面に出力する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#画面に出力する"}},[$._v("#")]),$._v(" 画面に出力する")]),$._v(" "),a("p",[$._v("フレームを作る関数を用意したので、それを使用してフレーム情報を変数に格納し、forで1frameずつ画面に出力します。")]),$._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("for")]),$._v(" frame "),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("in")]),$._v(" frames\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" ここで画面にframeを出力する')]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("call")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("popup_settext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),$._v("winid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(",")]),$._v(" frame"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[$._v('" redraw!で画面を再描写する"')]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("redraw")]),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("!")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" 一瞬で出力が終わってしまうので少し待つ')]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("sleep")]),$._v(" 50ms\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" qで終了できるように`getchar()`で入力した文字を取得')]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[$._v('" キー入力を待たないように、引数に`0`を渡す')]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("let")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[$._v("key")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("=")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("getchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[$._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("if")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[$._v("key")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[$._v("==#")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[$._v("113")]),$._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("break")]),$._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("endif")]),$._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("endfor")]),$._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[$._v('" for分を抜けたらウィンドウを閉じる"')]),$._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[$._v("call")]),$._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[$._v("popup_close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v("(")]),$._v("winid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[$._v(")")]),$._v("\n")])]),$._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[$._v("1")]),a("br"),a("span",{staticClass:"line-number"},[$._v("2")]),a("br"),a("span",{staticClass:"line-number"},[$._v("3")]),a("br"),a("span",{staticClass:"line-number"},[$._v("4")]),a("br"),a("span",{staticClass:"line-number"},[$._v("5")]),a("br"),a("span",{staticClass:"line-number"},[$._v("6")]),a("br"),a("span",{staticClass:"line-number"},[$._v("7")]),a("br"),a("span",{staticClass:"line-number"},[$._v("8")]),a("br"),a("span",{staticClass:"line-number"},[$._v("9")]),a("br"),a("span",{staticClass:"line-number"},[$._v("10")]),a("br"),a("span",{staticClass:"line-number"},[$._v("11")]),a("br"),a("span",{staticClass:"line-number"},[$._v("12")]),a("br"),a("span",{staticClass:"line-number"},[$._v("13")]),a("br"),a("span",{staticClass:"line-number"},[$._v("14")]),a("br"),a("span",{staticClass:"line-number"},[$._v("15")]),a("br"),a("span",{staticClass:"line-number"},[$._v("16")]),a("br")])]),a("h2",{attrs:{id:"まとめ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[$._v("#")]),$._v(" まとめ")]),$._v(" "),a("p",[$._v("動画をAsciiテキストに変換して、フレームを定義すれば、どんなものでも同じようなロジックでVim再生できます。\n興味ある方はぜひチャレンジしてみてください。")])])}),[],!1,null,null,null);s.default=t.exports}}]);